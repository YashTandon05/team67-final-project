<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ðŸŒ€Predicting Hurricane Helene</title>
    <link rel="stylesheet" href="style.css" />
    <script src="script.js" type="module"></script>
    <!-- <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="https://unpkg.com/topojson-client@3"></script> -->
    <script src="https://unpkg.com/scrollama"></script>
  </head>
  <body>
    <main>
      <header>
        <h1>Predicting Hurricane Helene</h1>
        <p>
          Interactive data visualization to explore path predictions and weather
          patterns of a major hurricane between September 20, 2024 and October
          15, 2024.
        </p>
      </header>

      <div id="loading-overlay">
        <div class="loading-content">
          <h1>Small errors, big consequences - hurricane data matters!</h1>
          <p>There were 6 named hurricanes surounding the Atlantic basin during just one month of 2024. How does satellite weather data help build infrastructure for preparedness?</p>
          <button id="continue-btn" class="hidden">Continue</button>
        </div>
      </div>
      <div id="datetime-display">
        <div id="date"></div>
        <div id="time"></div>
      </div>

      <!--return to top button-->
      <a href="#viz-wrapper" id="skip-link">Return to Top</a>

      <section id="viz-wrapper">
        <div id="controls-container">
          <label class="switch-container">
            <span class="switch-label">Wind Speed</span>
            <label class="switch">
              <input type="checkbox" id="feature-toggle">
              <span class="slider round"></span>
            </label>
          </label>
        </div>
        
        <div id="interaction-hints">
            <div class="hint">Scroll to zoom!</div>
            <div class="hint">Click and drag to rotate!</div>
        </div>
        <div id="color-legend"></div>
        <div id="track-color-legend" class="hidden"></div> 
        <div id="globe-container">
          <!-- SVG will be injected here by script.js -->
        </div>

        <div id="mini-heatmap-container" class="hidden">
          <h3>Rate of Change</h3>
          <canvas id="mini-heatmap-canvas"></canvas>
          <div class="legend">
            <span>Weakening</span>
            <div class="gradient-bar"></div>
            <span>Intensifying</span>
          </div>
        </div>

        <div id="scrolly">
          <article>
            <!-- Scene 1: Title & Globe Intro -->
            <div class="step" data-step="scene1">
              <div class="text-content">
                <h2>Predicting Hurricane Helene</h2>
                <p>
                  <strong> Instructions</strong>: Scroll to progress through
                  Time. Click and drag on the globe to rotate. Use the mouse
                  wheel to zoom in and out.
                </p>
              </div>
            </div>

            <div class="step" data-step="spacer1">
              <div class="text-content">
                <h2>The 2024 Hurricane Season</h2>
                <p>
                  From Mid August to Mid October alone, the Atlantic basin
                  experienced <strong>6 named hurricanes</strong>, from Tropical
                  Storms to Category 5s. You've explored already half of the season.
                </p>
                <p>
                  Hurricanes are complex systems influenced by many factors,
                  making accurate predictions challenging yet crucial for
                  preparedness and response.
                </p>
              </div>
            </div>

            <!-- Scene 2: Helene Appears -->
            <div class="step" data-step="scene2">
              <div class="text-content">
                <h2>Enter Hurricane Helene</h2>
                <p>
                  Weâ€™ll walk through three forecasting challenges using
                  Hurricane Helene. Click to skip to any challenge.
                </p>
                <ul>
                  <li id="ch-button"><a href="#chapter1">1. Intensity</a></li>
                  <li id="ch-button"><a href="#chapter2">2. Track</a></li>
                  <li id="ch-button"><a href="#chapter3">3. Resource Allocation</a></li>
                </ul>
                <p>Youâ€™ll make predictions â€” just like real forecasters. By having you try to make predictions yourself, the granularity and fidelity of satellite weather data can be explored through the lens of hurricane preparedness.</p>
              </div>
            </div>

            <!-- Scene 3: Line Graph Enters -->
            <div class="step" data-step="scene3" id="chapter1">
              <div class="text-content">
                <h2>Challenge 1: Intensity</h2>
                <p>
                  Helene was initially expected to be a manageable storm. But in the warm waters of the Gulf, something changed.
                </p>
                <p>
                  A hurricaneâ€™s rainfall rate â€” its intensity â€” is one of the hardest things to forecast. Below is Heleneâ€™s early rainfall trend over Florida.
                </p>
              </div>
            </div>

            <!-- Scene 4: User Guess Prompt (Intensity) -->
            <div
              class="step"
              data-step="scene4"
              data-behavior="guess-intensity"
            >
              <div class="text-content">
                <h2>Your Turn</h2>
                <p>
                  <strong
                    >When do you think Heleneâ€™s max rainfall will exceed 50
                    mm/hr (threshold for "violent" rainfall) in Florida?</strong
                  >
                </p>
                <div id="line-graph-viz"></div>
                <p>Use the ruler to make a data-informed prediction. Click on the timeline to lock in your guess.</p>
                <p
                  id="reality-text"
                  style="
                    display: none;
                    margin-top: 15px;
                    font-style: italic;
                    color: #2b9c85;
                  "
                >
                  <!-- Content injected by JS -->
                </p>
              </div>
            </div>

            <!-- Scene 5: Reveal (Intensity) -->
            <div class="step" data-step="scene5">
              <div class="text-content">
                <h2>The Reality</h2>
                <p>
                  That sudden jump is <strong>rapid intensification</strong>: when a storm grows stronger much faster than expected.
                </p>
                <p>
                  For coastal communities, those hours can mean the difference between a routine storm and a disaster. 
                </p>
                <p>
                  <strong>BUT</strong> without continuous, high-resolution satellite data, we donâ€™t see this jump clearly â€” or we see it too late.
                </p>
              </div>
            </div>

            <div class="step" data-step="scene6" id="chapter2">
              <div class="text-content">
                <h2>Challenge 2: Track</h2>
                <p>
                  Next: forecasting where a hurricane will go. Here's an
                  approximate center of the storm. Can you guys the path of the
                  storm over the next 36 hours? Click anywhere on the map to
                  cast your prediction.
                </p>
                <p>
                  The true path is shown in red and your predictions are shown in pink!
                </p>
                <p class="prediction-feedback"
                  style="
                    display: none;
                    margin-top: 15px;
                    font-style: italic;
                    color: #2b9c85;
                  "
                  >
                  Prediction placed! Keep scrolling to see how you did.
                </p>
              </div>
            </div>

            <!-- Scene 7: Expert Cone Appears -->
            <div class="step" data-step="scene7">
              <div class="text-content">
                <h2>Try Again!</h2>
                <p>
                  Also, try visualizing <strong>wind speed</strong> and
                  direction by toggling the button in the top right. Does that
                  help your prediction? <br><br>
                  Experts use many variables like <strong> storm structure, oceanic conditions, and atomospheric conditions</strong> to update their advanced statistical models. They update their predictions in <strong>realtime</strong> to inform emergency managers and the public.
                </p>
                <p class="prediction-feedback"
                  style="
                    display: none;
                    margin-top: 15px;
                    font-style: italic;
                    color: #2b9c85;
                  "
                  >
                  Prediction placed! Keep scrolling to see how you did.
                </p>
              </div>
            </div>

            <!-- Scene 8: User Guess Prompt (Track) -->
            <div class="step" data-step="scene8" data-behavior="guess-track">
              <div class="text-content">
                <h2>Your final shot!</h2>
                <p class="prediction-feedback"
                  style="
                    display: none;
                    margin-top: 15px;
                    font-style: italic;
                    color: #2b9c85;
                  "
                  >
                  Prediction placed! Keep scrolling to see how you did.
                </p>
              </div>
            </div>

            <!-- Scene 9: Reveal (Track) -->
            <div class="step" data-step="scene9">
              <div class="text-content">
                <h2>How did you do?</h2>
                <p>
                  How did your guess compare to the official track over 36
                  hours? We have also displayed the predicted path by experts in white, starting just <strong>3hrs</strong> before you starting forecasting yourself. 
                </p>
                <div id="track-feedback"></div>
                <small>Expert prediction data provided by the <a href="https://rammb-data.cira.colostate.edu/tc_realtime/storm.asp?storm_identifier=al092024&"target="_blank">Regional and Mesoscale Meteorology Branch.</a></small>
              </div>
            </div>

            <!-- Scene 10: Game Intro -->
            <div class="step" data-step="scene10" id="chapter3">
              <div class="text-content">
                <h2>Challenge 3: Emergency Resource Allocation</h2>
                <p>
                  Forecasts matter only when translated into decisions. You are now the emergency manager.
                </p>
                <p>
                  Helene is approaching. You have limited resources to protect Florida's regions.
                </p>
              </div>
            </div>

            <!-- Scene 11: Allocation -->
            <div class="step" data-step="scene11">
              <div class="text-content">
                <h2>Make Your Decisions</h2>
                <p>
                  Allocate <strong>Rainfall Mitigation Units</strong> and <strong>Wind Impact Units</strong>.
                </p>
                <p>
                  Use the sidebar to distribute your resources. Watch the globe for feedback.
                </p>
                <!-- Game Controls Container -->
                <div id="game-controls-container"></div>
                
                <div class="stats-panel">
                   <p>Rain Units Left: <span id="rain-left">100</span></p>
                   <p>Wind Units Left: <span id="wind-left">100</span></p>
                </div>
              </div>
            </div>

            <!-- Scene 12: Simulation -->
            <div class="step" data-step="scene12">
              <div class="text-content">
                <h2>The Storm Arrives</h2>
                <p>
                  Helene makes landfall. How did your preparation hold up?
                </p>
                <button id="submit-plan-btn">Run Simulation</button>
                
                <!-- Game Results Container -->
                <div id="simulation-results" class="hidden">
                    <h3>Preparedness Score: <span id="final-score">0/100</span></h3>
                    <div id="feedback-details"></div>
                    <!-- Close button not needed if inline -->
                </div>
              </div>
            </div>

            <!-- Scene 13: Reflection -->
            <div class="step" data-step="scene13">
              <div class="text-content">
                <h2>Reflection</h2>
                <p>
                  Even with data, uncertainty persists. Limited resources and time pressure make every decision critical.
                </p>
                <p>
                  This exercise shows why <strong>data infrastructure matters</strong>: more sensors mean more time, better decisions, and fewer casualties.
                </p>
              </div>
            </div>

            <!-- Scene 14: Conclusion -->
            <div class="step" data-step="scene14">
              <div class="text-content">
                <h2>Takeaway</h2>
                <p>
                  Now that Helene has passed, <strong>thereâ€™s one thing to rememberâ€¦</strong>
                </p>
                <p>
                  Preparedness relies as much on data infrastructure as on physical infrastructure.
                </p>
                <p>
                  Investing in weather sensors, satellites, and data pipelines creates time to act â€” and saves lives.
                </p>
              </div>
            </div>

            <!-- Scene 15: Summary (Old Scene 13) -->
            <div class="step" data-step="scene15">
              <div class="text-content">
                <h2>Summary</h2>
                <p>
                  We explored three key aspects of hurricane response:
                </p>
                <ul>
                  <li><strong>Intensity</strong>: Predicting rainfall spikes.</li>
                  <li><strong>Track</strong>: Forecasting the storm's path.</li>
                  <li><strong>Decisions</strong>: Allocating resources under uncertainty.</li>
                </ul>
                <p>
                  We hope this experience gave you a better appreciation for the challenges meteorologists and emergency managers face every day.
                </p>
              </div>
            </div>

            <div class="step" data-step="scene16">
              <div class="text-content">
                <h2>What kind of infrastructure exists to keep people safe?</h2>
                <p>
                  Various infrastructures, such as early warning systems,
                  evacuation routes, and resilient buildings, are in place to
                  protect communities from hurricane impacts. These systems rely
                  on accurate data and forecasts to function effectively.
                </p>
                <p>
                  We used real climate data from NOAA GOES16 to power this visualization! It is a low-orbiting satelite that provides continuous high-resolution data. This is just one example of the infrastructures in place to monitor and respond to hurricanes.
                </p>

              </div>
            </div>

            <div class="step" data-step="scene17">
              <div class="text-content">
                <h2>Learn more</h2>
                <p><ul> 
                    <li id="links">
                  <a href="https://aerospace.org/article/goes-r-understanding-critical-role-weather-satellites" target="_blank" > Understanding the Critical Role of Weather Satellites.</a>  </li>
                  <li id="links">
                    <a href="https://science.nasa.gov/earth/nasas-hurricane-science-tech-data-help-american-communities/" target="_blank" > NASA's Hurricane Science, Tech, and Data Help American Communities.</a>
                    </li>
                  </ul>
                </p>
              </div>
            </div>   

          </article>
        </div>

        <!-- Game UI Containers -->
        <div id="resource-game-ui" class="hidden">
          <div id="allocation-sidebar">
            <h3>Resource Allocation</h3>
            
            <div class="resource-stats">
              <div class="stat-box rain">
                <span class="label">Rain Units Left</span>
                <span id="rain-left" class="value">100</span>
              </div>
              <div class="stat-box wind">
                <span class="label">Wind Units Left</span>
                <span id="wind-left" class="value">100</span>
              </div>
            </div>

            <div id="regions-container">
              <!-- Injected by JS -->
            </div>
          </div>

          <div id="simulation-results" class="hidden">
            <h3>Simulation Results</h3>
            <div id="score-display">
              <span class="score-label">Preparedness Score</span>
              <span id="final-score">0/100</span>
            </div>
            <div id="feedback-details"></div>
            <button id="close-results">Close</button>
          </div>
        </div>
      </section>
    </main>
  </body>
</html>
